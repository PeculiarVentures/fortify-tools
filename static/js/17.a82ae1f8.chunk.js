(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[17],{121:function(e,t,r){"use strict";r.r(t),r.d(t,"peculiar_certificates_viewer",(function(){return l}));var o=r(22),i=r(179),a=r(152),c=function(e,t,r,o){return new(r||(r=Promise))((function(i,a){function c(e){try{l(o.next(e))}catch(t){a(t)}}function n(e){try{l(o.throw(e))}catch(t){a(t)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(c,n)}l((o=o.apply(e,t||[])).next())}))},n=function(e,t){var r,o,i,a,c={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:n(0),throw:n(1),return:n(2)},"function"===typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function n(a){return function(n){return function(a){if(r)throw new TypeError("Generator is already executing.");for(;c;)try{if(r=1,o&&(i=2&a[0]?o.return:a[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,a[1])).done)return i;switch(o=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return c.label++,{value:a[1],done:!1};case 5:c.label++,o=a[1],a=[0];continue;case 7:a=c.ops.pop(),c.trys.pop();continue;default:if(!(i=(i=c.trys).length>0&&i[i.length-1])&&(6===a[0]||2===a[0])){c=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){c.label=a[1];break}if(6===a[0]&&c.label<i[1]){c.label=i[1],i=a;break}if(i&&c.label<i[2]){c.label=i[2],c.ops.push(a);break}i[2]&&c.ops.pop(),c.trys.pop();continue}a=t.call(e,c)}catch(n){a=[6,n],o=0}finally{r=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,n])}}},l=function(){function e(e){var t=this;Object(o.k)(this,e),this.certificates=[],this.filterWithSearch=!0,this.highlightWithSearch=!0,this.search="",this.certificatesDecoded=[],this.isDecodeInProcess=!0,this.isHasTests=!1,this.isHasRoots=!1,this.onClickDetails=function(e,r){r.stopPropagation(),t.certificateSelectedForDetails=e},this.onClickModalClose=function(){t.certificateSelectedForDetails=void 0},this.onSearchChange=function(e){t.search=e.target.value.trim()}}return e.prototype.componentWillLoad=function(){this.certificatesDecodeAndSet()},e.prototype.watchCertificates=function(){this.certificatesDecodeAndSet()},e.prototype.certificatesDecodeAndSet=function(){return c(this,void 0,void 0,(function(){var e,t,r,o,a,c,l,s,d,p=this;return n(this,(function(n){switch(n.label){case 0:if(e=performance.now(),this.isHasTests=!1,this.isHasRoots=!1,!Array.isArray(this.certificates))return[2];t=[],r=0,o=this.certificates,n.label=1;case 1:if(!(r<o.length))return[3,6];a=o[r],n.label=2;case 2:return n.trys.push([2,4,,5]),[4,(c=new i.bb(a.value)).getThumbprint("SHA-1")];case 3:return n.sent(),t.push({body:c,tests:a.tests,name:a.name}),!this.isHasRoots&&c.isRoot&&(this.isHasRoots=!0),this.isHasTests||a.tests&&(a.tests.expired||a.tests.revoked||a.tests.valid)&&(this.isHasTests=!0),[3,5];case 4:return l=n.sent(),console.error("Error certificate parse:",l),[3,5];case 5:return r++,[3,1];case 6:return s=performance.now(),800,(d=s-e)<800?setTimeout((function(){p.isDecodeInProcess=!1}),800-d):this.isDecodeInProcess=!1,this.certificatesDecoded=t,[2]}}))}))},e.prototype.onClickDownloadAsPem=function(e,t){t.stopPropagation(),i.W.certificate.asPEM(e.body.exportAsPemFormatted(),e.name||e.body.commonName)},e.prototype.onClickDownloadAsDer=function(e,t){t.stopPropagation(),i.W.certificate.asPEM(e.body.exportAsHexFormatted(),e.name||e.body.commonName)},e.prototype.onClickRow=function(e){var t=this.expandedRow===e;this.expandedRow=t?void 0:e},e.prototype.renderExpandedRow=function(e){var t=4;return this.isHasTests&&(t+=1),this.isHasRoots||(t+=1),Object(o.i)("tr",{class:"expanded_summary"},Object(o.i)("td",{colSpan:t},Object(o.i)("peculiar-certificate-summary",{certificate:e,showIssuer:!e.isRoot})))},e.prototype.renderCertificateTests=function(e){if(!e)return null;var t=[];return e.valid&&t.push(Object(o.i)("peculiar-button",{class:"button_table_action",href:e.valid,target:"_blank"},a.f.getString("valid"))),e.revoked&&t.push(Object(o.i)("peculiar-button",{class:"button_table_action",href:e.revoked,target:"_blank"},a.f.getString("revoked"))),e.expired&&t.push(Object(o.i)("peculiar-button",{class:"button_table_action",href:e.expired,target:"_blank"},a.f.getString("expired"))),t},e.prototype.renderContentState=function(){var e=this,t=this.highlightWithSearch?this.search:"",r=[];return this.certificatesDecoded.forEach((function(c){var n=c.body.serialNumber===e.expandedRow,l=i.p[c.body.signature.algorithm]||c.body.signature.algorithm;if(e.filterWithSearch&&e.search&&-1===[l,c.body.issuerCommonName,c.name,c.body.commonName,c.body.thumbprints["SHA-1"]].join(" ").toLowerCase().indexOf(e.search.toLowerCase()))return;r.push([Object(o.i)("tr",{class:{expanded:n},onClick:e.onClickRow.bind(e,c.body.serialNumber),key:c.body.serialNumber},!e.isHasRoots&&Object(o.i)("td",null,Object(o.i)("peculiar-typography",{class:"mobile_title",color:"grey_5"},a.f.getString("issuer"),":"),Object(o.i)("peculiar-typography",{class:"content"},Object(o.i)("peculiar-highlight-words",{search:t},c.body.issuerCommonName))),Object(o.i)("td",null,Object(o.i)("peculiar-typography",{class:"mobile_title",color:"grey_5"},a.f.getString("name"),":"),Object(o.i)("peculiar-typography",{class:"content"},Object(o.i)("peculiar-highlight-words",{search:t},c.name||c.body.commonName))),Object(o.i)("td",null,Object(o.i)("peculiar-typography",{class:"mobile_title",color:"grey_5"},a.f.getString("publicKey"),":"),Object(o.i)("peculiar-typography",{class:"content"},Object(o.i)("peculiar-highlight-words",{search:t},l))),Object(o.i)("td",null,Object(o.i)("peculiar-typography",{class:"mobile_title",color:"grey_5"},a.f.getString("fingerprint"),"&nbsp: (SHA-1):"),Object(o.i)("peculiar-typography",{class:"content",monospace:!0},Object(o.i)("peculiar-highlight-words",{search:t},c.body.thumbprints["SHA-1"]))),Object(o.i)("td",{class:"align_center"},Object(o.i)("peculiar-typography",{class:"mobile_title",color:"grey_5"},a.f.getString("actions"),":"),Object(o.i)("span",{class:"content"},Object(o.i)("peculiar-button",{onClick:e.onClickDetails.bind(e,c.body),class:"button_table_action"},a.f.getString("details")),Object(o.i)("peculiar-button-split",{onClick:e.onClickDownloadAsPem.bind(e,c),actions:[{text:a.f.getString("download.der"),onClick:e.onClickDownloadAsDer.bind(e,c)}],class:"button_table_action"},a.f.getString("download.pem")))),e.isHasTests&&Object(o.i)("td",{class:"align_center"},Object(o.i)("peculiar-typography",{class:"mobile_title",color:"grey_5"},a.f.getString("testURLs"),":"),Object(o.i)("span",{class:"content"},e.renderCertificateTests(c.tests)))),n&&e.renderExpandedRow(c.body)])})),r},e.prototype.renderCertificateDetailsModal=function(){return this.certificateSelectedForDetails?Object(o.i)("div",{class:"modal_wrapper"},Object(o.i)("div",{class:"modal_content"},Object(o.i)("div",{class:"modal_title"},Object(o.i)("peculiar-typography",{type:"h4"},a.f.getString("certificateDetails")),Object(o.i)("button",{class:"modal_close",onClick:this.onClickModalClose,type:"button"},Object(o.i)("svg",{width:"30",height:"30",viewBox:"0 0 30 30",xmlns:"http://www.w3.org/2000/svg"},Object(o.i)("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M15.7204 14.375L21.0654 19.7185C21.3115 19.9658 21.3115 20.3693 21.0654 20.6154L20.615 21.0645C20.3689 21.3118 19.9667 21.3118 19.7181 21.0645L14.3744 15.721L9.03194 21.0645C8.78327 21.3118 8.3811 21.3118 8.13371 21.0645L7.68459 20.6154C7.43847 20.3693 7.43847 19.9658 7.68459 19.7185L13.0296 14.375L7.68459 9.03155C7.43847 8.78417 7.43847 8.38074 7.68459 8.13463L8.13371 7.68554C8.3811 7.43815 8.78327 7.43815 9.03194 7.68554L14.3744 13.029L19.7181 7.68554C19.9667 7.43815 20.3689 7.43815 20.615 7.68554L21.0654 8.13463C21.3115 8.38074 21.3115 8.78417 21.0654 9.03155L15.7204 14.375Z"})))),Object(o.i)("peculiar-certificate-viewer",{certificate:this.certificateSelectedForDetails}))):null},e.prototype.renderSearch=function(){return this.filterWithSearch||this.highlightWithSearch?Object(o.i)("div",{class:"search_section"},Object(o.i)("input",{onInput:this.onSearchChange,type:"search",value:"",class:"input_search",disabled:!this.certificatesDecoded.length,placeholder:"Search"})):null},e.prototype.renderEmptyState=function(){return Object(o.i)("tr",null,Object(o.i)("td",{class:"status_wrapper",colSpan:5},Object(o.i)("peculiar-typography",{type:"b1",align:"center"},"There are no certificates available.")))},e.prototype.renderEmptySearchState=function(){return Object(o.i)("tr",null,Object(o.i)("td",{class:"status_wrapper",colSpan:5},Object(o.i)("peculiar-typography",{type:"b1",align:"center"},"No results found for \u201c",this.search,"\u201c")))},e.prototype.renderLoadingState=function(){return Object(o.i)("div",{class:"loading_container"},Object(o.i)("peculiar-circular-progress",null))},e.prototype.renderBody=function(){if(this.isDecodeInProcess)return null;if(!this.certificatesDecoded.length)return this.renderEmptyState();var e=this.renderContentState();return this.search&&!e.length?this.renderEmptySearchState():e},e.prototype.render=function(){return Object(o.i)(o.b,null,this.renderSearch(),Object(o.i)("table",{class:{m_extra:this.isHasTests||!this.isHasRoots}},Object(o.i)("thead",null,Object(o.i)("tr",null,!this.isHasRoots&&Object(o.i)("th",{class:"col_issuer"},Object(o.i)("peculiar-typography",{type:"h7",align:"left"},a.f.getString("issuer"))),Object(o.i)("th",{class:"col_name"},Object(o.i)("peculiar-typography",{type:"h7",align:"left"},a.f.getString("name"))),Object(o.i)("th",{class:"col_public_key"},Object(o.i)("peculiar-typography",{type:"h7",align:"left"},a.f.getString("publicKey"))),Object(o.i)("th",{class:"col_fingerprint"},Object(o.i)("peculiar-typography",{type:"h7",align:"left"},a.f.getString("fingerprint"),"\xa0 (SHA-1)")),Object(o.i)("th",{class:"col_actions"},Object(o.i)("peculiar-typography",{type:"h7",align:"center"},a.f.getString("actions"))),this.isHasTests&&Object(o.i)("th",{class:"col_tests"},Object(o.i)("peculiar-typography",{type:"h7",align:"center"},a.f.getString("testURLs"))))),Object(o.i)("tbody",null,this.renderBody())),this.renderCertificateDetailsModal(),this.isDecodeInProcess&&this.renderLoadingState())},Object.defineProperty(e,"watchers",{get:function(){return{certificates:["watchCertificates"]}},enumerable:!1,configurable:!0}),e}();l.style=':host{-webkit-box-sizing:border-box;box-sizing:border-box}:host *,:host *:before,:host *:after{-webkit-box-sizing:inherit;box-sizing:inherit}:host{display:block;width:100%;word-wrap:break-word;min-width:280px;overflow:auto;position:relative;background:white;background:rgba(var(--pv-color-light-rgb), 1)}table{width:100%;table-layout:fixed;border-collapse:collapse;border-spacing:0}table thead{background-color:rgba(53, 132, 247, 0.07);background-color:rgba(var(--pv-color-primary-rgb), 0.07)}table tr td{vertical-align:middle}table tbody tr:not(.expanded_summary){cursor:pointer}table tr{border-color:#d1d5d9;border-color:rgba(var(--pv-color-grey_3-rgb), 1)}table th{padding:15px 10px;border-width:1px;border-style:solid;border-color:#d1d5d9;border-color:rgba(var(--pv-color-grey_3-rgb), 1)}table td{padding:8px 10px;border-width:1px;border-style:solid;border-color:#d1d5d9;border-color:rgba(var(--pv-color-grey_3-rgb), 1)}table .col_issuer,table .col_name,table .col_public_key{width:16%}table .col_actions,table .col_tests{width:18%}table.m_extra .col_issuer,table.m_extra .col_name,table.m_extra .col_public_key{width:12%}table.m_extra .col_actions,table.m_extra .col_tests{width:17%}table tr.expanded td:not(:last-child){border-right-color:transparent}table tr.expanded td{border-bottom-color:transparent}.expanded{border-bottom-color:transparent;background-color:rgba(53, 132, 247, 0.04);background-color:rgba(var(--pv-color-primary-rgb), 0.04)}table tr.expanded_summary{background-color:rgba(53, 132, 247, 0.04);background-color:rgba(var(--pv-color-primary-rgb), 0.04)}table tr.expanded_summary td{vertical-align:top;padding:10px 20px 26px}@-webkit-keyframes fadeIn{0%{opacity:0.001}100%{opacity:1}}@keyframes fadeIn{0%{opacity:0.001}100%{opacity:1}}.modal_wrapper{position:fixed;top:0;left:0;width:100%;height:100%;z-index:1;overflow:auto;padding:10px;text-align:center;background:rgba(42, 49, 52, 0.9);background:rgba(var(--pv-color-dark-rgb), 0.9);-webkit-animation:fadeIn 300ms;animation:fadeIn 300ms}.modal_wrapper:before{display:inline-block;vertical-align:middle;width:0;height:100%;content:""}.modal_content{position:relative;display:inline-block;vertical-align:middle;width:100%;max-width:900px;text-align:left;border-radius:3px;overflow:hidden;background-color:white;background-color:rgba(var(--pv-color-light-rgb), 1)}.modal_title{background-color:rgba(53, 132, 247, 0.07);background-color:rgba(var(--pv-color-primary-rgb), 0.07);border-color:#d1d5d9;border-color:rgba(var(--pv-color-grey_3-rgb), 1);border-bottom-width:1px;border-bottom-style:solid;padding:17px 60px 17px 20px;position:relative;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.modal_close{cursor:pointer;border:none;background-color:transparent;position:absolute;top:0;bottom:0;right:0;padding:0 12px;-webkit-transition:opacity 100ms;transition:opacity 100ms;outline:none}.modal_close:hover{opacity:0.6}.modal_close svg{fill:#2a3134;fill:rgba(var(--pv-color-dark-rgb), 1)}.button_table_action{margin:2px}.mobile_title{display:none}.status_wrapper{height:85px;text-align:center;pointer-events:none}.search_section{background-color:rgba(53, 132, 247, 0.07);background-color:rgba(var(--pv-color-primary-rgb), 0.07);border-color:#d1d5d9;border-color:rgba(var(--pv-color-grey_3-rgb), 1);height:50px;padding:10px;border-width:1px 1px 0 1px;border-style:solid}.input_search{height:100%;width:100%;border-radius:3px;border-width:1px;border-style:solid;padding:0 14px;font-size:12px;outline:none;border-color:#d1d5d9;border-color:rgba(var(--pv-color-grey_3-rgb), 1);color:#2a3134;color:rgba(var(--pv-color-dark-rgb), 1)}.input_search::-moz-placeholder{color:#d1d5d9;color:rgba(var(--pv-color-grey_3-rgb), 1)}.input_search:-ms-input-placeholder{color:#d1d5d9;color:rgba(var(--pv-color-grey_3-rgb), 1)}.input_search::-webkit-input-placeholder{color:#d1d5d9;color:rgba(var(--pv-color-grey_3-rgb), 1)}.input_search::-ms-input-placeholder{color:#d1d5d9;color:rgba(var(--pv-color-grey_3-rgb), 1)}.input_search::placeholder{color:#d1d5d9;color:rgba(var(--pv-color-grey_3-rgb), 1)}.loading_container{position:absolute;top:0;left:0;width:100%;height:100%;background:rgba(42, 49, 52, 0.3);background:rgba(var(--pv-color-dark-rgb), 0.3);display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center}.align_center{text-align:center}@media (hover: hover){table tbody tr:not(.expanded_summary):hover{background-color:rgba(53, 132, 247, 0.04);background-color:rgba(var(--pv-color-primary-rgb), 0.04)}}@media (max-width: 900px){table,tbody,tr,td{display:block}thead{display:none}tr{padding:0 15px;border-width:1px;border-style:solid}tr:not(:first-child){margin-top:-1px}tr:not(.expanded_summary) td:first-child{border:none !important}table td{padding-left:0;padding-right:0;border-width:1px 0 0 0 !important;border-color:rgba(209, 213, 217, 0.5);border-color:rgba(var(--pv-color-grey_3-rgb), 0.5)}table tr.expanded_summary td{padding:15px 0}.mobile_title{display:inline-block;width:90px;vertical-align:middle}.modal_title{padding:17px 60px 17px 15px}.content{display:inline-block;width:calc(100% - 90px);vertical-align:middle;text-align:left}.expanded_summary{border-top-color:transparent;padding-bottom:10px}.expanded_summary td:before{content:none}.status_wrapper{height:266px;display:table-cell}.search_section{height:60px;padding:15px}.align_center{text-align:inherit}}'}}]);
//# sourceMappingURL=17.a82ae1f8.chunk.js.map